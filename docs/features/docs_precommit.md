# Документация по фиче: базовая документация и pre-commit

---

## 1. Контекст до внедрения фичи

- Репозиторий содержит рабочие пакеты для сбора данных, обучения PPO и бэктеста.
- Отсутствует структурированная документация по слоям фреймворка.
- Нет единого pre-commit, поэтому сложно гарантировать единые стандарты форматирования и тестирования.

---

## 2. Цель фичи

- Добавить базовые текстовые описания основных компонентов: слой данных, конфиг, тренер и агенты.
- Настроить pre-commit с Black, Flake8, MyPy и pytest с покрытием.
- Обновить README с общим описанием проекта.

**Критерии успеха**
- В каталоге `docs/` появляются файлы с описанием слоёв и ссылка на них из `docs/index.md`.
- `pre-commit run --files <files>` выполняет Black, Flake8, MyPy и pytest.
- README содержит краткое общее описание.

---

## 3. Решение

### 3.1 Что входит в фичу (Scope)
- Создание документации: `docs/data.md`, `docs/config.md`, `docs/trainer.md`, `docs/agents.md`.
- Обновление `docs/index.md` и `README.md`.
- Добавление `.pre-commit-config.yaml` и `Makefile` с целями `lint` и `test`.

### 3.2 Что не входит (Out-of-scope)
- Переписывание существующего кода пакетов.
- Добавление новых тестов или реализация новых агентов.

### 3.3 Как это должно работать
- Документация описывает назначение и контракт каждой части фреймворка.
- Pre-commit выполняет форматирование, статический анализ и тесты для указанных файлов.

### 3.4 Архитектурные изменения
- Новые текстовые файлы под `docs/`.
- Конфигурация pre-commit в корне репозитория.

---

## 4. План реализации
1. Создать и заполнить файл фичи.
2. Написать документацию по слоям и обновить `docs/index.md`.
3. Обновить README общим описанием.
4. Добавить `.pre-commit-config.yaml` и `Makefile`.
5. Протестировать `pre-commit run`, `make lint` и `make test`.

---

## 5. Какие файлы нужно изменить
- `docs/features/docs_precommit.md` — **add**: описание фичи.
- `docs/data.md` — **add**: слой данных.
- `docs/config.md` — **add**: конфигурация тренировки.
- `docs/trainer.md` — **add**: тренер и процесс обучения.
- `docs/agents.md` — **add**: реализованные агенты.
- `docs/index.md` — **update**: ссылки на новые документы.
- `README.md` — **update**: общее описание.
- `.pre-commit-config.yaml` — **add**: конфигурация хуков.
- `Makefile` — **add**: команды `lint` и `test`.

---

## 6. Потенциальные риски

| Риск | Вероятность | Влияние | План |
|------|-------------|---------|------|
| Конфликты с существующими настройками разработчиков | Низкая | Среднее | Сделать конфигурацию минимальной и документировать её |
| Отсутствие тестов приведёт к ложному чувству покрытия | Средняя | Низкое | Указывать, что тесты нужно дополнять по мере развития |

---

## 7. План тестирования

### 7.1 Unit-тесты
- Нет новых тестов; запуск `pytest` должен проходить без ошибок.

### 7.2 Интеграционные тесты
- Не требуются.

### 7.3 Приёмочные сценарии
- Запуск `pre-commit run --files <changed_files>` выполняет все хуки без ошибок.
- `make lint FILES="<changed_files>"` и `make test` завершаются успешно.
